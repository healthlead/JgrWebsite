---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import { services } from '../data/services.ts';

// Icon rendering function
function renderIcon(iconKey: string, className: string = "") {
  const paths = iconPaths[iconKey as keyof typeof iconPaths] || iconPaths.building;
  return `<svg class="${className}" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    ${paths.map(path => {
      if (typeof path === 'string') {
        return `<path d="${path}" />`;
      } else if (path.type === 'rect') {
        return `<rect ${Object.entries(path.props).map(([k, v]) => `${k}="${v}"`).join(' ')} />`;
      } else if (path.type === 'circle') {
        return `<circle ${Object.entries(path.props).map(([k, v]) => `${k}="${v}"`).join(' ')} />`;
      }
      return `<path d="${path.props.d}" />`;
    }).join('')}
  </svg>`;
}

const iconPaths = {
  'building': [
    { type: 'rect', props: { width: "16", height: "20", x: "4", y: "2", rx: "2", ry: "2" } },
    "M9 22v-4h6v4",
    "M8 6h.01",
    "M16 6h.01",
    "M12 6h.01",
    "M12 10h.01",
    "M12 14h.01",
    "M16 10h.01",
    "M16 14h.01",
    "M8 10h.01",
    "M8 14h.01"
  ],
  'shield-check': [
    "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",
    "m9 12 2 2 4-4"
  ],
  'layers': [
    "M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",
    "M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",
    "M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"
  ],
  'brick': [
    { type: 'rect', props: { width: "18", height: "18", x: "3", y: "3", rx: "2" } },
    "M12 9v6",
    "M16 15v6",
    "M16 3v6",
    "M3 15h18",
    "M3 9h18",
    "M8 15v6",
    "M8 3v6"
  ],
  'eye': [
    "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",
    { type: 'circle', props: { cx: "12", cy: "12", r: "3" } }
  ],
  'clipboard-list': [
    "M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",
    "M12 11h4",
    "M12 16h4",
    "M8 11h.01",
    "M8 16h.01",
    { type: 'rect', props: { width: "8", height: "4", x: "8", y: "2", rx: "1", ry: "1" } }
  ],
  'users': [
    "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",
    "M16 3.128a4 4 0 0 1 0 7.744",
    "M22 21v-2a4 4 0 0 0-3-3.87",
    { type: 'circle', props: { cx: "9", cy: "7", r: "4" } }
  ],
  'check-circle': [
    { type: 'circle', props: { cx: "12", cy: "12", r: "10" } },
    "m9 12 2 2 4-4"
  ]
};

const processSteps = [
  {
    icon: 'clipboard-list',
    title: "Project Planning",
    description: "Detailed consultation and project assessment with value engineering recommendations"
  },
  {
    icon: 'building',
    title: "Design & Engineering",
    description: "Structural design optimization using advanced CAD software and engineering principles"
  },
  {
    icon: 'users',
    title: "Construction Execution",
    description: "Expert construction teams with full-time safety management and quality control"
  },
  {
    icon: 'check-circle',
    title: "Project Completion",
    description: "Final inspections, documentation, and ongoing support for your completed project"
  }
];
---

<Layout title="Services - JGR Construction" description="Comprehensive structural contracting services including concrete shells, post-tension, precast, masonry, and architectural concrete in Miami.">
  <Navbar />
  
  <div class="pt-20 min-h-screen bg-gray-50">
    <!-- Hero Section -->
    <section class="py-20 bg-gradient-to-r from-primary-burgundy to-prussian-blue text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center">
          <h1 class="text-4xl md:text-6xl font-bold mb-6">Our Services</h1>
          <p class="text-xl md:text-2xl text-blue-100 max-w-4xl mx-auto leading-relaxed">
            Comprehensive structural construction services delivered with unmatched expertise and precision. 
            From concept to completion, we build the foundation of Miami's future.
          </p>
        </div>
      </div>
    </section>

    <!-- Services Grid -->
    <section class="py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">Core Specializations</h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Expert structural construction services tailored to meet the unique demands of South Florida's dynamic construction environment
          </p>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {services.map((service) => (
            <div class="bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 group">
              <div class="flex items-start space-x-6">
                <div class="bg-ocean-blue/10 w-16 h-16 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-ocean-blue/20 transition-colors">
                  <Fragment set:html={renderIcon(service.icon, "w-8 h-8 text-ocean-blue")} />
                </div>
                <div class="flex-1">
                  <h3 class="text-2xl font-bold text-gray-900 mb-4">{service.name}</h3>
                  <p class="text-gray-600 text-lg leading-relaxed mb-4">{service.description}</p>
                  {service.featured && (
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-sunset-orange text-white">
                      Core Service
                    </span>
                  )}
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Our Process -->
    <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">Our Process</h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            A proven methodology that ensures project success from initial consultation to final completion
          </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          {processSteps.map((step, index) => (
            <div class="text-center group">
              <div class="relative mb-6">
                <div class="bg-ocean-blue/10 w-20 h-20 rounded-full flex items-center justify-center mx-auto group-hover:bg-ocean-blue/20 transition-colors">
                  <Fragment set:html={renderIcon(step.icon, "w-10 h-10 text-ocean-blue")} />
                </div>
                <div class="absolute -top-2 -right-2 bg-sunset-orange text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold">
                  {index + 1}
                </div>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3">{step.title}</h3>
              <p class="text-gray-600 leading-relaxed">{step.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Capabilities & Equipment -->
    <section class="py-20 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
          <div>
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-8">Advanced Capabilities</h2>
            <div class="space-y-6">
              <div class="flex items-start">
                <Fragment set:html={renderIcon('check-circle', "w-6 h-6 text-construction-green mr-4 mt-1 flex-shrink-0")} />
                <div>
                  <h3 class="font-semibold text-gray-900 mb-2">State-of-the-Art Equipment</h3>
                  <p class="text-gray-600">Modern fleet including pumps, excavators, and specialized concrete equipment with telemetric monitoring</p>
                </div>
              </div>
              
              <div class="flex items-start">
                <Fragment set:html={renderIcon('check-circle', "w-6 h-6 text-construction-green mr-4 mt-1 flex-shrink-0")} />
                <div>
                  <h3 class="font-semibold text-gray-900 mb-2">Advanced Software Solutions</h3>
                  <p class="text-gray-600">AutoCAD fabrication, aSa software management, and Trimble Total Station surveying technology</p>
                </div>
              </div>
              
              <div class="flex items-start">
                <Fragment set:html={renderIcon('check-circle', "w-6 h-6 text-construction-green mr-4 mt-1 flex-shrink-0")} />
                <div>
                  <h3 class="font-semibold text-gray-900 mb-2">Quality Control Systems</h3>
                  <p class="text-gray-600">Comprehensive testing protocols and real-time project monitoring with drone photography</p>
                </div>
              </div>
              
              <div class="flex items-start">
                <Fragment set:html={renderIcon('check-circle', "w-6 h-6 text-construction-green mr-4 mt-1 flex-shrink-0")} />
                <div>
                  <h3 class="font-semibold text-gray-900 mb-2">Strategic Partnerships</h3>
                  <p class="text-gray-600">Collaborations with crane operators and specialized equipment providers for large-scale projects</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="relative">
            <img 
              src="https://images.unsplash.com/photo-1581094288338-2314dddb7ece?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600" 
              alt="Construction equipment and technology" 
              class="rounded-2xl shadow-2xl w-full" 
            />
            
            <div class="absolute -bottom-6 -right-6 bg-white rounded-xl p-6 shadow-lg">
              <div class="flex items-center">
                <svg class="w-8 h-8 text-sunset-orange mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <div>
                  <div class="font-bold text-gray-900">OSHA Certified</div>
                  <div class="text-sm text-gray-600">Excellence in Safety</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-20 bg-gray-900 text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-6">Ready to Start Your Project?</h2>
        <p class="text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
          Contact our expert team to discuss your construction needs and receive a comprehensive project proposal.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a 
            href="/contact" 
            class="bg-sunset-orange text-white px-8 py-4 rounded-lg font-semibold hover:bg-orange-600 transition-colors inline-block"
          >
            Get Your Quote Today
          </a>
          <a 
            href="/projects" 
            class="border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-gray-900 transition-colors inline-block"
          >
            View Our Portfolio
          </a>
        </div>
      </div>
    </section>
  </div>

  <Footer />
</Layout>