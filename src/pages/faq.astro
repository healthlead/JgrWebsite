---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';

// Icon rendering function
function renderIcon(iconKey: string, className: string = "") {
  const paths = iconPaths[iconKey as keyof typeof iconPaths];
  if (!paths) return '';
  
  let svgContent = '';
  paths.forEach(path => {
    if (typeof path === 'string') {
      svgContent += `<path d="${path}" />`;
    } else if (path.type === 'circle') {
      svgContent += `<circle cx="${path.props.cx}" cy="${path.props.cy}" r="${path.props.r}" />`;
    }
  });
  
  return `<svg class="${className}" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    ${svgContent}
  </svg>`;
}

const iconPaths = {
  'chevron-down': [
    "m6 9 6 6 6-6"
  ],
  'chevron-up': [
    "m18 15-6-6-6 6"
  ],
  'phone': [
    "M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
  ],
  'clock': [
    { type: 'circle', props: { cx: "12", cy: "12", r: "10" } },
    "M12 6v6l4 2"
  ]
};

const faqs = [
  {
    question: "What types of construction projects does JGR specialize in?",
    answer: "JGR Construction specializes in structural concrete and masonry work for residential high-rises, mixed-use developments, luxury hotels, and commercial buildings. We handle everything from conventional concrete shells to complex post-tension systems and architectural concrete features."
  },
  {
    question: "How long has JGR Construction been in business?",
    answer: "JGR Construction has been proudly serving South Florida since 2009, with over 15 years of experience delivering excellence in structural contracting. We've completed more than 50 major projects in the Miami area."
  },
  {
    question: "What areas do you serve?",
    answer: "We primarily serve South Florida, with a focus on Miami-Dade, Broward, and Palm Beach counties. Our headquarters is located in Medley, FL, and we've worked on projects throughout the greater Miami metropolitan area."
  },
  {
    question: "Do you provide free estimates?",
    answer: "Yes, we provide detailed project estimates at no cost. Our experienced estimators will review your plans, visit the site if needed, and provide a comprehensive proposal outlining scope, timeline, and pricing."
  },
  {
    question: "What safety standards do you follow?",
    answer: "Safety is our top priority. We maintain OSHA certification and follow all federal, state, and local safety regulations. Our team receives regular safety training, and we maintain comprehensive insurance coverage for all projects."
  },
  {
    question: "How long does a typical project take?",
    answer: "Project timelines vary significantly based on size and complexity. A typical residential tower concrete structure might take 12-18 months, while smaller commercial projects could be completed in 3-6 months. We provide detailed schedules during the proposal phase."
  },
  {
    question: "What licenses and certifications do you hold?",
    answer: "JGR Construction holds a Florida General Contractor's license (CGC), OSHA safety certifications, and is a member of the Associated General Contractors (AGC). We maintain all required local permits and licensing for our service areas."
  },
  {
    question: "Do you work with architects and engineers?",
    answer: "Absolutely. We collaborate closely with architects, structural engineers, and design teams throughout the project lifecycle. Our experience allows us to provide valuable input during the design phase to optimize constructability and cost-effectiveness."
  },
  {
    question: "What is your payment schedule?",
    answer: "We typically work on a progress payment schedule tied to project milestones. Payment terms are clearly outlined in our contracts, usually with an initial mobilization payment followed by monthly progress payments based on completed work."
  },
  {
    question: "Do you handle permits and approvals?",
    answer: "Yes, we assist with obtaining all necessary building permits and coordinating inspections with local authorities. Our team is familiar with the permitting process across all municipalities we serve and can expedite approvals."
  },
  {
    question: "What happens if there are delays due to weather?",
    answer: "Weather delays are addressed in our contracts with fair and reasonable provisions. Florida's weather patterns are factored into our scheduling, and we maintain flexibility to adjust timelines when necessary while keeping projects on track."
  },
  {
    question: "Can you work on occupied buildings?",
    answer: "Yes, we have extensive experience working in occupied buildings and active developments. We coordinate closely with building management and residents to minimize disruption while maintaining the highest safety standards."
  }
];
---

<Layout title="FAQ - JGR Construction" description="Frequently asked questions about JGR Construction's services, licensing, safety procedures, and project management in Miami.">
  <Navbar />
  
  <div class="min-h-screen bg-gray-50 pt-20">
    <!-- Header -->
    <section class="py-20 bg-gradient-to-r from-primary-burgundy to-prussian-blue text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center">
          <h1 class="text-4xl md:text-6xl font-bold mb-6">Frequently Asked Questions</h1>
          <p class="text-xl md:text-2xl text-blue-100 max-w-4xl mx-auto leading-relaxed">
            Find answers to common questions about our construction services, 
            processes, and company policies.
          </p>
        </div>
      </div>
    </section>

    <!-- FAQ Items -->
    <section class="py-20 relative">
      <!-- Background decoration -->
      <div class="absolute inset-0 bg-gradient-to-b from-gray-50 to-white"></div>
      
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative">
        <!-- Section header with image -->
        <div class="text-center mb-16">
          <div class="inline-flex items-center justify-center w-16 h-16 bg-primary-burgundy rounded-full mb-6">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            Everything You Need to Know
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Get expert answers from our experienced team
          </p>
        </div>

        <div class="grid gap-6">
          {faqs.map((faq, index) => (
            <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300 group">
              <button
                class="faq-toggle w-full px-8 py-6 text-left hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-burgundy focus:ring-inset"
                data-index={index}
              >
                <div class="flex justify-between items-start">
                  <div class="flex items-start space-x-4">
                    <!-- Question number badge -->
                    <div class="flex-shrink-0 w-8 h-8 bg-primary-burgundy text-white rounded-full flex items-center justify-center text-sm font-bold group-hover:bg-ocean-blue transition-colors">
                      {index + 1}
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 pr-8 group-hover:text-primary-burgundy transition-colors">
                      {faq.question}
                    </h3>
                  </div>
                  <div class="faq-icon flex-shrink-0">
                    <Fragment set:html={renderIcon('chevron-down', "w-6 h-6 text-gray-400 group-hover:text-primary-burgundy transition-colors")} />
                  </div>
                </div>
              </button>
              
              <div class="faq-answer hidden px-8 pb-6">
                <div class="ml-12 pl-4 border-l-4 border-gray-200">
                  <p class="text-gray-600 leading-relaxed text-lg">
                    {faq.answer}
                  </p>
                </div>
              </div>
            </div>
          ))}
        </div>
        
        <!-- Help section with image -->
        <div class="mt-20 bg-gradient-to-r from-primary-burgundy to-prussian-blue rounded-2xl p-8 md:p-12 text-white relative overflow-hidden">
          <!-- Background pattern -->
          <div class="absolute inset-0 opacity-10">
            <svg class="w-full h-full" viewBox="0 0 100 100" fill="none">
              <defs>
                <pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse">
                  <path d="M 10 0 L 0 0 0 10" fill="none" stroke="currentColor" stroke-width="0.5"/>
                </pattern>
              </defs>
              <rect width="100" height="100" fill="url(#grid)" />
            </svg>
          </div>
          
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center relative">
            <div>
              <h3 class="text-2xl md:text-3xl font-bold mb-4">
                Need More Specific Information?
              </h3>
              <p class="text-blue-100 text-lg mb-6">
                Our construction experts are ready to discuss your unique project requirements and provide detailed answers tailored to your needs.
              </p>
              <div class="flex flex-col sm:flex-row gap-4">
                <a 
                  href="tel:+13052627306" 
                  class="flex items-center justify-center bg-sunflower-yellow text-rich-black px-6 py-3 rounded-xl font-semibold hover:bg-yellow-500 transition-colors"
                >
                  Call Now
                </a>
                <a 
                  href="/contact"
                  class="flex items-center justify-center border-2 border-white text-white hover:bg-white hover:text-gray-900 px-6 py-3 rounded-xl font-semibold transition-colors"
                >
                  Send Message
                </a>
              </div>
            </div>
            
            <div class="relative">
              <img 
                src="https://images.unsplash.com/photo-1553028826-f4804151e2b2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400" 
                alt="Construction consultation meeting" 
                class="rounded-xl shadow-lg w-full" 
              />
              <div class="absolute -top-4 -right-4 bg-primary-burgundy rounded-full p-4">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2v-6a2 2 0 012-2h8z"></path>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

  </div>

  <Footer />
</Layout>

<script define:vars={{ faqs }}>
  // FAQ toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const openItems = new Set();
    
    function toggleItem(index) {
      const faqItem = document.querySelector(`[data-index="${index}"]`).closest('.bg-white');
      const answer = faqItem.querySelector('.faq-answer');
      const iconContainer = faqItem.querySelector('.faq-icon');
      
      if (openItems.has(index)) {
        // Close item
        openItems.delete(index);
        answer.classList.add('hidden');
        iconContainer.innerHTML = `<svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m6 9 6 6 6-6" />
        </svg>`;
      } else {
        // Open item
        openItems.add(index);
        answer.classList.remove('hidden');
        iconContainer.innerHTML = `<svg class="w-5 h-5 text-primary-burgundy" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m18 15-6-6-6 6" />
        </svg>`;
      }
    }
    
    // Add click listeners
    document.querySelectorAll('.faq-toggle').forEach((toggle, index) => {
      toggle.addEventListener('click', () => toggleItem(index));
    });
  });
</script>